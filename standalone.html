<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Tech - ETP & TR Generator</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React e ReactDOM via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel Standalone para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-1px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #1f2937;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .stepper-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
            cursor: pointer;
        }

        .stepper-item:hover {
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .stepper-item.disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .stepper-number {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .stepper-number.completed {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .stepper-number.current {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }

        .stepper-number.upcoming {
            background: white;
            border-color: #d1d5db;
            color: #9ca3af;
        }
    </style>
</head>

<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Estado Global Simples (substituindo Zustand)
        class ETStore {
            constructor() {
                this.listeners = new Set();
                this.state = this.loadState();
            }

            loadState() {
                const saved = localStorage.getItem('etp-storage');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (e) {
                        return this.getInitialState();
                    }
                }
                return this.getInitialState();
            }

            getInitialState() {
                return {
                    currentSection: 1,
                    formData: {
                        secretariaRequisitante: '',
                        responsavelElaboracao: '',
                        descricaoNecessidade: '',
                        subcontratacao: 'Não Pode Subcontratar',
                        percentualSubcontratacao: '',
                        sustentabilidade: '',
                        garantia: '',
                        vedacaoMarca: 'Não',
                        justificativaVedacao: '',
                        alternativa1: '',
                        alternativa2: '',
                        alternativa3: '',
                        conclusaoAlternativa: '',
                        descricaoSolucao: '',
                        modalidade: 'Pregão Eletrônico',
                        justificativaModalidade: '',
                        procedimentoAuxiliar: 'Registro de Preço',
                        tipoJulgamento: 'Menor Preço',
                        formaJulgamento: 'Por Item',
                        justificativaLoteamento: '',
                        metodoPrecificacao: 'Média Aritmética',
                        valorTotal: '',
                        resultadosPretendidos: '',
                        haProvidencias: false,
                        descricaoProvidencias: 'Para esta solução não há necessidade de ajustes de qualquer natureza, a serem adotados pela Administração Pública',
                        contratacoesCorrelatas: 'Não',
                        descricaoCorrelatas: '',
                        impactosAmbientais: 'Não',
                        descricaoImpactos: '',
                        viabilidade: 'O presente estudo levantou os elementos essenciais que irão compor o Termo de Referência e demonstrou ser viável a contratação demandada, cabendo ressaltar que os riscos envolvidos são administráveis e os custos previstos são compatíveis e se caracterizam pela economicidade',
                        conclusaoRisco: '',
                    },
                    sectionValidation: {
                        1: false, 2: false, 3: false, 4: false, 5: false, 6: false,
                        7: false, 8: false, 9: false, 10: false, 11: false, 12: false, 13: false
                    }
                };
            }

            getState() {
                return this.state;
            }

            setState(newState) {
                this.state = { ...this.state, ...newState };
                this.saveState();
                this.notifyListeners();
            }

            saveState() {
                localStorage.setItem('etp-storage', JSON.stringify(this.state));
            }

            subscribe(listener) {
                this.listeners.add(listener);
                return () => this.listeners.delete(listener);
            }

            notifyListeners() {
                this.listeners.forEach(listener => listener(this.state));
            }

            updateField(field, value) {
                this.setState({
                    formData: { ...this.state.formData, [field]: value }
                });
            }

            setCurrentSection(section) {
                this.setState({ currentSection: section });
            }

            nextSection() {
                this.setState({ currentSection: Math.min(this.state.currentSection + 1, 13) });
            }

            previousSection() {
                this.setState({ currentSection: Math.max(this.state.currentSection - 1, 1) });
            }

            validateSection(sectionNumber) {
                const formData = this.state.formData;
                let isValid = false;

                switch (sectionNumber) {
                    case 1:
                        isValid = formData.secretariaRequisitante.trim() !== '' &&
                            formData.responsavelElaboracao.trim() !== '';
                        break;
                    case 2:
                        isValid = formData.descricaoNecessidade.trim() !== '';
                        break;
                    case 3:
                        isValid = formData.garantia.trim() !== '';
                        break;
                    case 4:
                        isValid = formData.alternativa1.trim() !== '' &&
                            formData.conclusaoAlternativa.trim() !== '';
                        break;
                    case 5:
                        isValid = formData.descricaoSolucao.trim() !== '';
                        break;
                    case 6:
                        isValid = true;
                        break;
                    case 7:
                        isValid = formData.valorTotal !== '' && parseFloat(formData.valorTotal) > 0;
                        break;
                    case 8:
                        isValid = formData.resultadosPretendidos.trim() !== '';
                        break;
                    case 9:
                        isValid = formData.descricaoProvidencias.trim() !== '';
                        break;
                    case 10:
                    case 11:
                        isValid = true;
                        break;
                    case 12:
                        isValid = formData.viabilidade.trim() !== '';
                        break;
                    case 13:
                        isValid = formData.conclusaoRisco.trim() !== '';
                        break;
                    default:
                        isValid = false;
                }

                this.setState({
                    sectionValidation: { ...this.state.sectionValidation, [sectionNumber]: isValid }
                });

                return isValid;
            }
        }

        const store = new ETStore();

        // Hook personalizado para usar o store
        function useStore() {
            const [state, setState] = useState(store.getState());

            useEffect(() => {
                const unsubscribe = store.subscribe(setState);
                return unsubscribe;
            }, []);

            return {
                ...state,
                updateField: (field, value) => store.updateField(field, value),
                setCurrentSection: (section) => store.setCurrentSection(section),
                nextSection: () => store.nextSection(),
                previousSection: () => store.previousSection(),
                validateSection: (section) => store.validateSection(section),
            };
        }

        // Componente Home
        function Home({ onSelectModule }) {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50">
                    <header className="bg-blue-800 text-white shadow-lg">
                        <div className="container mx-auto px-6 py-8">
                            <h1 className="text-4xl font-bold mb-2">
                                Gerador de Peças Licitatórias
                            </h1>
                            <p className="text-blue-200 text-lg">
                                Lei Federal nº 14.133/2021
                            </p>
                        </div>
                    </header>

                    <main className="container mx-auto px-6 py-12">
                        <div className="max-w-5xl mx-auto">
                            <div className="text-center mb-12">
                                <h2 className="text-3xl font-bold text-gray-800 mb-4">
                                    Bem-vindo à Plataforma Legal Tech
                                </h2>
                                <p className="text-gray-600 text-lg max-w-2xl mx-auto">
                                    Gere documentos profissionais de licitação de forma rápida e
                                    conforme a legislação vigente.
                                </p>
                            </div>

                            <div className="grid md:grid-cols-2 gap-8">
                                <div
                                    onClick={() => onSelectModule('etp')}
                                    className="card hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 border-2 border-transparent hover:border-blue-500"
                                >
                                    <div className="flex flex-col items-center text-center">
                                        <div className="bg-blue-100 p-6 rounded-full mb-6">
                                            <svg className="w-16 h-16 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                            </svg>
                                        </div>
                                        <h3 className="text-2xl font-bold text-gray-800 mb-4">
                                            Estudo Técnico Preliminar (ETP)
                                        </h3>
                                        <p className="text-gray-600 mb-6">
                                            Crie um ETP completo em 13 etapas estruturadas com validação automática.
                                        </p>
                                        <button className="btn-primary w-full">
                                            Iniciar ETP
                                        </button>
                                    </div>
                                </div>

                                <div className="card opacity-60 border-2 border-gray-200">
                                    <div className="flex flex-col items-center text-center">
                                        <div className="bg-gray-100 p-6 rounded-full mb-6">
                                            <svg className="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                            </svg>
                                        </div>
                                        <h3 className="text-2xl font-bold text-gray-500 mb-4">
                                            Termo de Referência (TR)
                                        </h3>
                                        <p className="text-gray-500 mb-6">
                                            Módulo em desenvolvimento.
                                        </p>
                                        <button className="btn-secondary w-full" disabled>
                                            Em Breve
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="bg-gray-800 text-gray-300 py-8 mt-20">
                        <div className="container mx-auto px-6 text-center">
                            <p className="text-sm">© 2024 Legal Tech - ETP & TR Generator | v1.0.0</p>
                            <p className="text-xs mt-2 text-gray-400">Lei 14.133/2021</p>
                        </div>
                    </footer>
                </div>
            );
        }

        // Componente de Input de Texto (continua...)
        // Devido ao tamanho, vou criar em próximo arquivo

        // Componente Principal
        function App() {
            const [currentModule, setCurrentModule] = useState('home');

            return (
                <>
                    {currentModule === 'home' && <Home onSelectModule={setCurrentModule} />}
                    {currentModule === 'etp' && (
                        <div className="min-h-screen flex items-center justify-center bg-gray-100 p-8">
                            <div className="card max-w-2xl text-center">
                                <h2 className="text-3xl font-bold text-gray-800 mb-4">
                                    Módulo ETP em Desenvolvimento
                                </h2>
                                <p className="text-gray-600 mb-6">
                                    A versão standalone está sendo preparada. Por favor, instale as dependências
                                    via npm para acessar a versão completa com todas as 13 seções.
                                </p>
                                <button
                                    onClick={() => setCurrentModule('home')}
                                    className="btn-primary"
                                >
                                    Voltar
                                </button>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        // Renderizar
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>